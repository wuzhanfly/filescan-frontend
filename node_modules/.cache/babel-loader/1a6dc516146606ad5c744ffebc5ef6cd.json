{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js!/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/header/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/header/Search.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3d1emhhbmZseS9naXQvZmlsc2Nhbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvd3V6aGFuZmx5L2dpdC9maWxzY2FuLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNlYXJjaCB9IGZyb20gIkAvYXBpL2hvbWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNlYXJjaCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlcjogMCwKICAgICAga2V5OiAiIiwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb1RhcmdldDogZnVuY3Rpb24gZ29UYXJnZXQobmFtZSwga2V5KSB7CiAgICAgIHRoaXMuZ29UbyhuYW1lLCB7CiAgICAgICAgcXVlcnk6IF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCB0aGlzLmtleSkKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VhcmNoOiBmdW5jdGlvbiBoYW5kbGVTZWFyY2goZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCBtb2RlbF9mbGFnLCB0YXJnZXQsIGtleTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICAgICAgICAgICAgX3RoaXMua2V5ID0gX3RoaXMua2V5LnJlcGxhY2UoL1teCDAtOWEtekEtWl0vZywgIiIpOwoKICAgICAgICAgICAgICAgIGlmICghKGUudHlwZSA9PT0gImtleXVwIiAmJiBlLmtleUNvZGUgIT09IDEzIHx8ICFfdGhpcy5rZXkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaCh7CiAgICAgICAgICAgICAgICAgIGtleTogX3RoaXMua2V5LAogICAgICAgICAgICAgICAgICBmaWx0ZXI6IF90aGlzLmZpbHRlcgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBtb2RlbF9mbGFnID0gcmVzLm1vZGVsX2ZsYWc7CiAgICAgICAgICAgICAgICB0YXJnZXQgPSAiIjsKICAgICAgICAgICAgICAgIGtleSA9ICIiOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBtb2RlbF9mbGFnOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQwID09PSAiYmxvY2tfaGFzaCIgPyAxNSA6IF9jb250ZXh0LnQwID09PSAiSGVpZ2h0IiA/IDE4IDogX2NvbnRleHQudDAgPT09ICJtZXNzYWdlX0lEIiA/IDIxIDogX2NvbnRleHQudDAgPT09ICJhY3RvciIgPyAyNCA6IF9jb250ZXh0LnQwID09PSAicGVlcl9pZCIgPyAyNyA6IDMwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICB0YXJnZXQgPSAidGlwc2V0IjsKICAgICAgICAgICAgICAgIGtleSA9ICJoYXNoIjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMzIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgdGFyZ2V0ID0gInRpcHNldCI7CiAgICAgICAgICAgICAgICBrZXkgPSAiaGVpZ2h0IjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMzIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgdGFyZ2V0ID0gIm1lc3NhZ2VEZXRhaWwiOwogICAgICAgICAgICAgICAga2V5ID0gImNpZCI7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDMyKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIHRhcmdldCA9ICJhZGRyZXNzRGV0YWlsIjsKICAgICAgICAgICAgICAgIGtleSA9ICJhZGRyZXNzIjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMzIpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgdGFyZ2V0ID0gInBlZXIiOwogICAgICAgICAgICAgICAga2V5ID0gInBlZXJfaWQiOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICB0YXJnZXQgPSAibm9SZXN1bHQiOwogICAgICAgICAgICAgICAga2V5ID0gImtleSI7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgiaGlkZSIpOwoKICAgICAgICAgICAgICAgIF90aGlzLmdvVGFyZ2V0KHRhcmdldCwga2V5KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDM2XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAiJHJvdXRlLnBhdGgiOiBmdW5jdGlvbiAkcm91dGVQYXRoKCkgewogICAgICB0aGlzLmtleSA9ICIiOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SAAA,MAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,CADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,IADA,EACA,GADA,EACA;AACA,WAAA,IAAA,CAAA,IAAA,EAAA;AACA,QAAA,KAAA,sBACA,GADA,EACA,KAAA,GADA;AADA,OAAA;AAKA,KAPA;AAQA,IAAA,YARA,wBAQA,CARA,EAQA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,gBAAA,KAAA,CAAA,GAAA,GAAA,KAAA,CAAA,GAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,EAAA,CAAA;;AAFA,sBAIA,CAAA,CAAA,IAAA,KAAA,OAAA,IAAA,CAAA,CAAA,OAAA,KAAA,EAAA,IAAA,CAAA,KAAA,CAAA,GAJA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAQA,gBAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AARA;AAAA,uBASA,MAAA,CAAA;AACA,kBAAA,GAAA,EAAA,KAAA,CAAA,GADA;AAEA,kBAAA,MAAA,EAAA,KAAA,CAAA;AAFA,iBAAA,CATA;;AAAA;AASA,gBAAA,GATA;AAaA,gBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,gBAAA,UAdA,GAcA,GAdA,CAcA,UAdA;AAeA,gBAAA,MAfA,GAeA,EAfA;AAgBA,gBAAA,GAhBA,GAgBA,EAhBA;AAAA,8BAiBA,UAjBA;AAAA,gDAkBA,YAlBA,wBAsBA,QAtBA,wBA0BA,YA1BA,wBA8BA,OA9BA,wBAkCA,SAlCA;AAAA;;AAAA;AAmBA,gBAAA,MAAA,GAAA,QAAA;AACA,gBAAA,GAAA,GAAA,MAAA;AApBA;;AAAA;AAuBA,gBAAA,MAAA,GAAA,QAAA;AACA,gBAAA,GAAA,GAAA,QAAA;AAxBA;;AAAA;AA2BA,gBAAA,MAAA,GAAA,eAAA;AACA,gBAAA,GAAA,GAAA,KAAA;AA5BA;;AAAA;AA+BA,gBAAA,MAAA,GAAA,eAAA;AACA,gBAAA,GAAA,GAAA,SAAA;AAhCA;;AAAA;AAmCA,gBAAA,MAAA,GAAA,MAAA;AACA,gBAAA,GAAA,GAAA,SAAA;AApCA;;AAAA;AAuCA,gBAAA,MAAA,GAAA,UAAA;AACA,gBAAA,GAAA,GAAA,KAAA;;AAxCA;AA0CA,gBAAA,KAAA,CAAA,KAAA,CAAA,MAAA;;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,MAAA,EAAA,GAAA;;AA3CA;AAAA;;AAAA;AAAA;AAAA;AA6CA,gBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AA7CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+CA;AAvDA,GATA;AAkEA,EAAA,KAAA,EAAA;AACA,iBADA,wBACA;AACA,WAAA,GAAA,GAAA,EAAA;AACA;AAHA;AAlEA,CAAA","sourcesContent":["<template>\n  <div class=\"header-search\">\n    <el-input\n      :placeholder=\"$t('header.placeholder')\"\n      v-model=\"key\"\n      :class=\"['input-with-select', theme === 'light' ? 'light' : 'dark']\"\n      @keyup.native=\"handleSearch\"\n      :clearable=\"!isMobile\"\n      :suffix-icon=\"loading && !isMobile ? 'el-icon-loading' : ''\"\n    >\n      <el-select\n        v-model=\"filter\"\n        slot=\"prepend\"\n        popper-class=\"filter-select\"\n        v-if=\"!isMobile\"\n        class=\"search-filter\"\n      >\n        <el-option\n          v-for=\"item in $t('header.filter')\"\n          :key=\"item.label\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        ></el-option>\n      </el-select>\n      <el-button\n        slot=\"append\"\n        icon=\"el-icon-search\"\n        @click.native=\"handleSearch\"\n        v-if=\"!isMobile\"\n      ></el-button>\n    </el-input>\n    <div class=\"mb-button\" v-if=\"isMobile\">\n      <el-button type=\"primary\" @click.native=\"handleSearch\">\n        {{ $t(\"header.mb.search\") }}\n      </el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport { search } from \"@/api/home\";\nexport default {\n  name: \"Search\",\n  data() {\n    return {\n      filter: 0,\n      key: \"\",\n      loading: false\n    };\n  },\n  methods: {\n    goTarget(name, key) {\n      this.goTo(name, {\n        query: {\n          [key]: this.key\n        }\n      });\n    },\n    async handleSearch(e) {\n      /* eslint-disable */\n      this.key = this.key.replace(/[^\b0-9a-zA-Z]/g, \"\");\n\n      if ((e.type === \"keyup\" && e.keyCode !== 13) || !this.key) {\n        return;\n      }\n      try {\n        this.loading = true;\n        let res = await search({\n          key: this.key,\n          filter: this.filter\n        });\n        this.loading = false;\n        const { model_flag } = res;\n        let target = \"\";\n        let key = \"\";\n        switch (model_flag) {\n          case \"block_hash\":\n            target = \"tipset\";\n            key = \"hash\";\n            break;\n          case \"Height\":\n            target = \"tipset\";\n            key = \"height\";\n            break;\n          case \"message_ID\":\n            target = \"messageDetail\";\n            key = \"cid\";\n            break;\n          case \"actor\":\n            target = \"addressDetail\";\n            key = \"address\";\n            break;\n          case \"peer_id\":\n            target = \"peer\";\n            key = \"peer_id\";\n            break;\n          default:\n            target = \"noResult\";\n            key = \"key\";\n        }\n        this.$emit(\"hide\");\n        this.goTarget(target, key);\n      } catch (e) {\n        this.loading = false;\n      }\n    }\n  },\n  watch: {\n    \"$route.path\"() {\n      this.key = \"\";\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.header-search {\n  flex: 1;\n  .input-with-select {\n    & ::v-deep  input:nth-child(2) {\n      background: var(--board-bg-color) !important;\n      color: var(--main-text-color);\n    }\n    &.dark ::v-deep input:nth-child(2) {\n      background: var(--main-bg-color) !important;\n      border-color: transparent;\n    }\n    &.dark ::v-deep .el-input-group__prepend{\n      background: var(--main-bg-color)!important;\n      border-color: transparent;\n      border-right: 1px solid var(--board-bg-color)\n    }\n    &.dark ::v-deep .el-input-group__append {\n      background: var(--main-bg-color)!important;\n      border-color: transparent;\n      border-left: 1px solid var(--board-bg-color)\n    }\n  }\n  & ::v-deep .el-input-group__prepend {\n    background: var(--board-bg-color) !important;\n    .el-select.search-filter input {\n      width: 130px;\n      background: transparent !important;\n    }\n  }\n  & ::v-deep .el-input-group__append {\n    background: var(--board-bg-color) !important;\n    color: var(--main-text-color) !important;\n  }\n  & ::v-deep .el-button {\n    width: 70px;\n  }\n  @media (max-width: 768px) {\n    & ::v-deep input {\n      height: 30px !important;\n      border-radius: 15px !important;\n    }\n    & ::v-deep .el-select {\n      width: 100px;\n    }\n    & ::v-deep .el-input__suffix {\n      i {\n        line-height: 20px;\n        padding-left: 5px;\n        &.is-reverse {\n          padding-right: 10px;\n        }\n      }\n    }\n    & ::v-deep button {\n      width: 50px !important;\n    }\n    .mb-button .el-button {\n      height: 30px;\n      border-radius: 15px;\n      width: 100% !important;\n      margin-top: 20px;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/views/header"}]}