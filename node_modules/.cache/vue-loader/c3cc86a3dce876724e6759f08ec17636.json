{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/tipset/Tipset.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/tipset/Tipset.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUaWNrZXRDaGFpbiBmcm9tICIuL2NvbXBvbmVudHMvVGlja2V0Q2hhaW4iOwppbXBvcnQgQmxvY2tMaXN0IGZyb20gIi4vY29tcG9uZW50cy9CbG9ja0xpc3QiOwppbXBvcnQgQmxvY2tEZXRhaWwgZnJvbSAiLi9jb21wb25lbnRzL0Jsb2NrRGV0YWlsIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUaXBzZXQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNoOiAiIiwKICAgICAgaGVpZ2h0OiAwLAogICAgICB2YWx1ZTogMCwKICAgICAgYmxvY2tzOiBbXSwKICAgICAgZGF0YUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJoZWlnaHQiLAogICAgICAgICAgaXNMaW5rOiB0cnVlLAogICAgICAgICAgdGFyZ2V0OiAidGlwc2V0IgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiaGFzaCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInRpbWVzdGFtcCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNpemUiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJtZXNMZW5ndGgiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJtaW5lciIsCiAgICAgICAgICB0YXJnZXQ6ICJhZGRyZXNzL2FjY291bnQiLAogICAgICAgICAgaXNMaW5rOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJyZXdhcmQiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJwYXJlbnRzIiwKICAgICAgICAgIGlzTGluazogdHJ1ZSwKICAgICAgICAgIHRhcmdldDogInRpcHNldCIsCiAgICAgICAgICBwYXJhbUtleTogImhhc2giCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJwYXJlbnRfd2VpZ2h0IgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAidGlja2V0cyIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInN0YXRlX3Jvb3QiCiAgICAgICAgfQogICAgICBdLAogICAgICBjb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAiaGFzaCIsCiAgICAgICAgICBpc0xpbms6IHRydWUsCiAgICAgICAgICB0YXJnZXQ6ICJ0aXBzZXQiLAogICAgICAgICAgZWxsaXBzaXM6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInRpbWVzdGFtcCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogIm1lc0xlbmd0aCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNpemUiLAogICAgICAgICAgdW5pdDogImJ5dGVzIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAibWluZXIiLAogICAgICAgICAgaXNMaW5rOiB0cnVlLAogICAgICAgICAgdGFyZ2V0OiAiYWRkcmVzcy9kZXRhaWwiLAogICAgICAgICAgcGFyYW1LZXk6ICJhZGRyZXNzIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAicmV3YXJkIiwKICAgICAgICAgIHVuaXQ6ICJGSUwiCiAgICAgICAgfQogICAgICBdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICIkcm91dGUucXVlcnkiOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcih2KSB7CiAgICAgICAgdGhpcy5oYXNoID0gdi5oYXNoOwogICAgICAgIGxldCBoZWlnaHQgPSAwOwogICAgICAgIGlmICh2LmhlaWdodCkgewogICAgICAgICAgaGVpZ2h0ID0gdGhpcy5wYXJzZUZvcm1hdE51bWJlcih2LmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuaGVpZ2h0ID0gTnVtYmVyKGhlaWdodCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFRpY2tldENoYWluLAogICAgQmxvY2tMaXN0LAogICAgQmxvY2tEZXRhaWwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbImRlZmF1bHRIZWlnaHQiXSksCiAgICBjdXJyZW50SGVpZ2h0KCkgewogICAgICByZXR1cm4gTnVtYmVyKHRoaXMuaGVpZ2h0IHx8IHRoaXMuZGVmYXVsdEhlaWdodCk7CiAgICB9LAogICAgY3VycmVudEJsb2NrTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tzLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgIHJldHVybiBpdGVtLmhlaWdodCA9PSB0aGlzLmZvcm1hdE51bWJlcih0aGlzLmhlaWdodCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tzOwogICAgICB9CiAgICB9LAogICAgY3VycmVudEJsb2NrKCkgewogICAgICByZXR1cm4gdGhpcy5ibG9ja3MuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLmhhc2ggPT0gdGhpcy5oYXNoOwogICAgICB9KVswXTsKICAgIH0sCiAgICBtYkJsb2NrTGlzdCgpIHsKICAgICAgY29uc3QgcmVzID0ge307CiAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaWYgKCFyZXNbaXRlbS5oZWlnaHRdKSB7CiAgICAgICAgICByZXNbaXRlbS5oZWlnaHRdID0gW2l0ZW1dOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNbaXRlbS5oZWlnaHRdLnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBtYkNvbHVtbnMoKSB7CiAgICAgIGNvbnN0IGxhYmVscyA9IFsuLi50aGlzLiR0KCJjb21wb25lbnQuYmxvY2tMaXN0LmxhYmVsIildOwogICAgICBsYWJlbHMuc2hpZnQoKTsKICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICB0aXRsZTogbGFiZWxzW2luZGV4XQogICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QmxvY2tzKHYpIHsKICAgICAgdGhpcy5ibG9ja3MgPSB2OwogICAgfSwKICAgIGhhbmRsZUhhc2hDaGFuZ2UodikgewogICAgICB0aGlzLmdvVG8oInRpcHNldCIsIHsKICAgICAgICBxdWVyeTogewogICAgICAgICAgaGFzaDogdgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlSGVpZ2h0Q2hhbmdlKHYpIHsKICAgICAgdGhpcy5nb1RvKCJ0aXBzZXQiLCB7CiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGhlaWdodDogdgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVmFsdWVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy52YWx1ZTsKICAgICAgdGhpcy5nb1RvKCJ0aXBzZXQiLCB7CiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGhlaWdodDogdGhpcy52YWx1ZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Tipset.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tipset.vue","sourceRoot":"src/views/tipset","sourcesContent":["<template>\n  <div class=\"tipset\">\n    <ticket-chain\n      @hash-change=\"handleHashChange\"\n      :height.sync=\"height\"\n      :hash=\"hash\"\n      @height-change=\"handleHeightChange\"\n      @get-blocks=\"getBlocks\"\n      v-show=\"!isMobile\"\n    />\n    <block-detail v-if=\"hash\" :hash=\"hash\" :block=\"currentBlock\" />\n    <block-list\n      v-if=\"!hash && !isMobile\"\n      :height=\"currentHeight\"\n      :list=\"currentBlockList\"\n    />\n    <div class=\"mb-block-list\" v-if=\"isMobile && !hash\">\n      <div\n        v-for=\"(value, key) in mbBlockList\"\n        :key=\"key\"\n        class=\"block-item-con\"\n      >\n        <div class=\"height\">\n          <div>{{ $t(\"tipset.height\") }}</div>\n          <div>{{ key }}</div>\n        </div>\n        <mb-board\n          v-for=\"item in value\"\n          :key=\"item.hash\"\n          :dataSource=\"item\"\n          :columns=\"mbColumns\"\n        ></mb-board>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport TicketChain from \"./components/TicketChain\";\nimport BlockList from \"./components/BlockList\";\nimport BlockDetail from \"./components/BlockDetail\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Tipset\",\n  data() {\n    return {\n      hash: \"\",\n      height: 0,\n      value: 0,\n      blocks: [],\n      dataList: [\n        {\n          key: \"height\",\n          isLink: true,\n          target: \"tipset\"\n        },\n        {\n          key: \"hash\"\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"size\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"miner\",\n          target: \"address/account\",\n          isLink: true\n        },\n        {\n          key: \"reward\"\n        },\n        {\n          key: \"parents\",\n          isLink: true,\n          target: \"tipset\",\n          paramKey: \"hash\"\n        },\n        {\n          key: \"parent_weight\"\n        },\n        {\n          key: \"tickets\"\n        },\n        {\n          key: \"state_root\"\n        }\n      ],\n      columns: [\n        {\n          key: \"hash\",\n          isLink: true,\n          target: \"tipset\",\n          ellipsis: true\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"size\",\n          unit: \"bytes\"\n        },\n        {\n          key: \"miner\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"reward\",\n          unit: \"FIL\"\n        }\n      ]\n    };\n  },\n  watch: {\n    \"$route.query\": {\n      deep: true,\n      immediate: true,\n      handler(v) {\n        this.hash = v.hash;\n        let height = 0;\n        if (v.height) {\n          height = this.parseFormatNumber(v.height);\n        }\n        this.height = Number(height);\n      }\n    }\n  },\n  components: {\n    TicketChain,\n    BlockList,\n    BlockDetail\n  },\n  computed: {\n    ...mapState([\"defaultHeight\"]),\n    currentHeight() {\n      return Number(this.height || this.defaultHeight);\n    },\n    currentBlockList() {\n      if (this.height) {\n        return this.blocks.filter(item => {\n          return item.height == this.formatNumber(this.height);\n        });\n      } else {\n        return this.blocks;\n      }\n    },\n    currentBlock() {\n      return this.blocks.filter(item => {\n        return item.hash == this.hash;\n      })[0];\n    },\n    mbBlockList() {\n      const res = {};\n      this.blocks.forEach(item => {\n        if (!res[item.height]) {\n          res[item.height] = [item];\n        } else {\n          res[item.height].push(item);\n        }\n      });\n      return res;\n    },\n    mbColumns() {\n      const labels = [...this.$t(\"component.blockList.label\")];\n      labels.shift();\n      return this.columns.map((item, index) => {\n        return {\n          ...item,\n          title: labels[index]\n        };\n      });\n    }\n  },\n  methods: {\n    getBlocks(v) {\n      this.blocks = v;\n    },\n    handleHashChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          hash: v\n        }\n      });\n    },\n    handleHeightChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          height: v\n        }\n      });\n    },\n    handleValueChange() {\n      this.height = this.value;\n      this.goTo(\"tipset\", {\n        query: {\n          height: this.value\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.tipset {\n  .chart-con {\n    width: 100%;\n    background: var(--main-bg-color);\n    .chart {\n      width: 100%;\n      height: 500px;\n    }\n  }\n  @media (max-width: 768px) {\n    .block-item-con {\n      .height {\n        text-align: center;\n        background: var(--link-color);\n        color: white;\n        line-height: 20px;\n        margin-bottom: 10px;\n      }\n      //display: flex;\n      // .height{\n      //   background: var(--link-color);\n      //   height: 20px;\n      //   line-height: 20px;\n      //   color: white;\n      //   padding-left: 10px;\n      //   margin-right: 10px;\n      //   position: relative;\n      //   width: 70px;\n      //   &::after{\n      //     content: '';\n      //     display: inline-block;\n      //     width: 14px;\n      //     height: 14px;\n      //     background: var(--link-color);\n      //     transform: rotate(45deg);\n      //     position: absolute;\n      //     right: -7px;\n      //     top: 3px\n      //   }\n      // }\n    }\n  }\n}\n</style>\n"]}]}