{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/home/components/TotalBoard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/home/components/TotalBoard.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEJvYXJkSW5mbyB9IGZyb20gIkAvYXBpL2hvbWUiOwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUb3RhbEJvYXJkIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5mbzogWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsS2V5OiAiaGVpZ2h0IiwKICAgICAgICAgIGtleTogInRpcHNldF9oZWlnaHQiLAogICAgICAgICAgY2xhc3M6ICJibHVlIiwKICAgICAgICAgIHVuaXQ6ICIiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbEtleTogInJld2FyZCIsCiAgICAgICAgICBrZXk6ICJibG9ja19yZXdhcmQiLAogICAgICAgICAgY2xhc3M6ICJibHVlIiwKICAgICAgICAgIHVuaXQ6ICJGSUwiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbEtleTogImF2Z01zZ1RpcHNldCIsCiAgICAgICAgICBrZXk6ICJhdmdfbWVzc2FnZXNfdGlwc2V0IiwKICAgICAgICAgIGNsYXNzOiAicHVycGxlIiwKICAgICAgICAgIHVuaXQ6ICIiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbEtleTogImF2Z0dhcyIsCiAgICAgICAgICBrZXk6ICJhdmdfZ2FzX3ByaWNlIiwKICAgICAgICAgIGNsYXNzOiAicHVycGxlIiwKICAgICAgICAgIHVuaXQ6ICIiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbEtleTogImF2Z01zZyIsCiAgICAgICAgICBrZXk6ICJhdmdfbWVzc2FnZV9zaXplIiwKICAgICAgICAgIGNsYXNzOiAieWVsbG93IiwKICAgICAgICAgIHVuaXQ6ICJieXRlcyIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsS2V5OiAicGxlZGdlIiwKICAgICAgICAgIGtleTogInBsZWRnZV9jb2xsYXRlcmFsIiwKICAgICAgICAgIGNsYXNzOiAieWVsbG93IiwKICAgICAgICAgIHVuaXQ6ICJGSUwiCiAgICAgICAgfQogICAgICBdLAogICAgICB0aW1lcjogbnVsbCwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgIGF3YWl0IHRoaXMuZ2V0Qm9hcmRJbmZvKCk7CiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXMuZ2V0Qm9hcmRJbmZvKCk7CiAgICB9LCAzMDAwMCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoWyJzZXRIZWlnaHQiLCAiaW5jcmVhc2VMb2FkQ291bnQiXSksCiAgICBhc3luYyBnZXRCb2FyZEluZm8oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IGdldEJvYXJkSW5mbygpOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGluZm8uYXZnX21lc3NhZ2Vfc2l6ZSA9IHBhcnNlSW50KGluZm8uYXZnX21lc3NhZ2Vfc2l6ZSk7CiAgICAgICAgdGhpcy5pbmZvID0gdGhpcy5pbmZvLm1hcChpdGVtID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm1hdE51bWJlcigKICAgICAgICAgICAgICBpdGVtLmtleSA9PT0gImF2Z19nYXNfcHJpY2UiCiAgICAgICAgICAgICAgICA/IGluZm9baXRlbS5rZXldLnRvRml4ZWQoMikKICAgICAgICAgICAgICAgIDogaW5mb1tpdGVtLmtleV0KICAgICAgICAgICAgKQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNldEhlaWdodChpbmZvLnRpcHNldF9oZWlnaHQpOwogICAgICAgIHRoaXMuaW5jcmVhc2VMb2FkQ291bnQoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9Cn07Cg=="},{"version":3,"sources":["TotalBoard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TotalBoard.vue","sourceRoot":"src/views/home/components","sourcesContent":["<template>\n  <div\n    class=\"total-board bottom-10\"\n    v-loading=\"loading\"\n    element-loading-background=\"var(--board-bg-color)\"\n  >\n    <div v-for=\"item in info\" :key=\"item.key\" class=\"info-item\">\n      <div>\n        {{ $t(`home.board.${item.labelKey}.label`) }}\n        <el-popover\n          placement=\"bottom-start\"\n          width=\"200\"\n          trigger=\"hover\"\n          :content=\"$t(`home.board.${item.labelKey}.tips`)\"\n          v-if=\"!isMobile\"\n        >\n          <i\n            class=\"el-icon-warning-outline\"\n            slot=\"reference\"\n            style=\"margin-left:3px\"\n          ></i>\n        </el-popover>\n      </div>\n      <div v-show=\"!loading\">{{ `${item.value || \"\"} ${item.unit}` }}</div>\n    </div>\n  </div>\n</template>\n<script>\nimport { getBoardInfo } from \"@/api/home\";\nimport { mapMutations } from \"vuex\";\nexport default {\n  name: \"TotalBoard\",\n  data() {\n    return {\n      info: [\n        {\n          labelKey: \"height\",\n          key: \"tipset_height\",\n          class: \"blue\",\n          unit: \"\"\n        },\n        {\n          labelKey: \"reward\",\n          key: \"block_reward\",\n          class: \"blue\",\n          unit: \"FIL\"\n        },\n        {\n          labelKey: \"avgMsgTipset\",\n          key: \"avg_messages_tipset\",\n          class: \"purple\",\n          unit: \"\"\n        },\n        {\n          labelKey: \"avgGas\",\n          key: \"avg_gas_price\",\n          class: \"purple\",\n          unit: \"\"\n        },\n        {\n          labelKey: \"avgMsg\",\n          key: \"avg_message_size\",\n          class: \"yellow\",\n          unit: \"bytes\"\n        },\n        {\n          labelKey: \"pledge\",\n          key: \"pledge_collateral\",\n          class: \"yellow\",\n          unit: \"FIL\"\n        }\n      ],\n      timer: null,\n      loading: false\n    };\n  },\n  async mounted() {\n    this.loading = true;\n    await this.getBoardInfo();\n    this.loading = false;\n    this.timer = setInterval(() => {\n      this.getBoardInfo();\n    }, 30000);\n  },\n  methods: {\n    ...mapMutations([\"setHeight\", \"increaseLoadCount\"]),\n    async getBoardInfo() {\n      try {\n        const info = await getBoardInfo();\n        this.loading = false;\n        info.avg_message_size = parseInt(info.avg_message_size);\n        this.info = this.info.map(item => {\n          return {\n            ...item,\n            value: this.formatNumber(\n              item.key === \"avg_gas_price\"\n                ? info[item.key].toFixed(2)\n                : info[item.key]\n            )\n          };\n        });\n        this.setHeight(info.tipset_height);\n        this.increaseLoadCount();\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.total-board {\n  display: flex;\n  flex-wrap: wrap;\n  .info-item {\n    //width: 16.66%;\n    border-radius: 8px;\n    box-shadow: 0px 1px 7px 9px rgba(0, 0, 0, 0.03);\n    padding: 15px;\n    flex: 1;\n    margin-right: 10px;\n    background: var(--board-bg-color);\n    &:nth-child(6) {\n      margin-right: 0;\n    }\n    div {\n      height: 30px;\n      line-height: 30px;\n      color: #999;\n      text-align: center;\n      color: var(--total-board-top-color);\n    }\n    div:last-child {\n      font-size: 24px;\n      color: var(--total-board-bottom-color);\n    }\n    div:first-child {\n      margin-bottom: 5px;\n      font-weight: bold;\n      span {\n        position: relative;\n        i {\n          position: absolute;\n          top: 4px;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n}\n@media (max-width: 768px) {\n  .total-board {\n    .info-item {\n      flex: 1;\n      min-width: 45%;\n      margin-bottom: 10px;\n      box-sizing: border-box;\n      margin-right: 0;\n      &:nth-child(2n + 1) {\n        margin-right: 10px;\n      }\n      div {\n        height: 20px;\n        line-height: 20px !important;\n        color: var(--total-board-bottom-color) !important;\n        font-size: 10px;\n        &:first-child {\n          color: var(--total-board-top-color) !important;\n        }\n        &:last-child {\n          font-size: 12px;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}