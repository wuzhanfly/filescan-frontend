{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/tipset/Tipset.vue?vue&type=style&index=0&id=2dc40405&lang=scss&scoped=true&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/tipset/Tipset.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aXBzZXQgewogIC5jaGFydC1jb24gewogICAgd2lkdGg6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1tYWluLWJnLWNvbG9yKTsKICAgIC5jaGFydCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDUwMHB4OwogICAgfQogIH0KICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgIC5ibG9jay1pdGVtLWNvbiB7CiAgICAgIC5oZWlnaHQgewogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saW5rLWNvbG9yKTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgfQogICAgICAvL2Rpc3BsYXk6IGZsZXg7CiAgICAgIC8vIC5oZWlnaHR7CiAgICAgIC8vICAgYmFja2dyb3VuZDogdmFyKC0tbGluay1jb2xvcik7CiAgICAgIC8vICAgaGVpZ2h0OiAyMHB4OwogICAgICAvLyAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogICAgICAvLyAgIGNvbG9yOiB3aGl0ZTsKICAgICAgLy8gICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgICAgIC8vICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgICAvLyAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgLy8gICB3aWR0aDogNzBweDsKICAgICAgLy8gICAmOjphZnRlcnsKICAgICAgLy8gICAgIGNvbnRlbnQ6ICcnOwogICAgICAvLyAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAvLyAgICAgd2lkdGg6IDE0cHg7CiAgICAgIC8vICAgICBoZWlnaHQ6IDE0cHg7CiAgICAgIC8vICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saW5rLWNvbG9yKTsKICAgICAgLy8gICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTsKICAgICAgLy8gICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgLy8gICAgIHJpZ2h0OiAtN3B4OwogICAgICAvLyAgICAgdG9wOiAzcHgKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["Tipset.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tipset.vue","sourceRoot":"src/views/tipset","sourcesContent":["<template>\n  <div class=\"tipset\">\n    <ticket-chain\n      @hash-change=\"handleHashChange\"\n      :height.sync=\"height\"\n      :hash=\"hash\"\n      @height-change=\"handleHeightChange\"\n      @get-blocks=\"getBlocks\"\n      v-show=\"!isMobile\"\n    />\n    <block-detail v-if=\"hash\" :hash=\"hash\" :block=\"currentBlock\" />\n    <block-list\n      v-if=\"!hash && !isMobile\"\n      :height=\"currentHeight\"\n      :list=\"currentBlockList\"\n    />\n    <div class=\"mb-block-list\" v-if=\"isMobile && !hash\">\n      <div\n        v-for=\"(value, key) in mbBlockList\"\n        :key=\"key\"\n        class=\"block-item-con\"\n      >\n        <div class=\"height\">\n          <div>{{ $t(\"tipset.height\") }}</div>\n          <div>{{ key }}</div>\n        </div>\n        <mb-board\n          v-for=\"item in value\"\n          :key=\"item.hash\"\n          :dataSource=\"item\"\n          :columns=\"mbColumns\"\n        ></mb-board>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport TicketChain from \"./components/TicketChain\";\nimport BlockList from \"./components/BlockList\";\nimport BlockDetail from \"./components/BlockDetail\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Tipset\",\n  data() {\n    return {\n      hash: \"\",\n      height: 0,\n      value: 0,\n      blocks: [],\n      dataList: [\n        {\n          key: \"height\",\n          isLink: true,\n          target: \"tipset\"\n        },\n        {\n          key: \"hash\"\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"size\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"miner\",\n          target: \"address/account\",\n          isLink: true\n        },\n        {\n          key: \"reward\"\n        },\n        {\n          key: \"parents\",\n          isLink: true,\n          target: \"tipset\",\n          paramKey: \"hash\"\n        },\n        {\n          key: \"parent_weight\"\n        },\n        {\n          key: \"tickets\"\n        },\n        {\n          key: \"state_root\"\n        }\n      ],\n      columns: [\n        {\n          key: \"hash\",\n          isLink: true,\n          target: \"tipset\",\n          ellipsis: true\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"size\",\n          unit: \"bytes\"\n        },\n        {\n          key: \"miner\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"reward\",\n          unit: \"FIL\"\n        }\n      ]\n    };\n  },\n  watch: {\n    \"$route.query\": {\n      deep: true,\n      immediate: true,\n      handler(v) {\n        this.hash = v.hash;\n        let height = 0;\n        if (v.height) {\n          height = this.parseFormatNumber(v.height);\n        }\n        this.height = Number(height);\n      }\n    }\n  },\n  components: {\n    TicketChain,\n    BlockList,\n    BlockDetail\n  },\n  computed: {\n    ...mapState([\"defaultHeight\"]),\n    currentHeight() {\n      return Number(this.height || this.defaultHeight);\n    },\n    currentBlockList() {\n      if (this.height) {\n        return this.blocks.filter(item => {\n          return item.height == this.formatNumber(this.height);\n        });\n      } else {\n        return this.blocks;\n      }\n    },\n    currentBlock() {\n      return this.blocks.filter(item => {\n        return item.hash == this.hash;\n      })[0];\n    },\n    mbBlockList() {\n      const res = {};\n      this.blocks.forEach(item => {\n        if (!res[item.height]) {\n          res[item.height] = [item];\n        } else {\n          res[item.height].push(item);\n        }\n      });\n      return res;\n    },\n    mbColumns() {\n      const labels = [...this.$t(\"component.blockList.label\")];\n      labels.shift();\n      return this.columns.map((item, index) => {\n        return {\n          ...item,\n          title: labels[index]\n        };\n      });\n    }\n  },\n  methods: {\n    getBlocks(v) {\n      this.blocks = v;\n    },\n    handleHashChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          hash: v\n        }\n      });\n    },\n    handleHeightChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          height: v\n        }\n      });\n    },\n    handleValueChange() {\n      this.height = this.value;\n      this.goTo(\"tipset\", {\n        query: {\n          height: this.value\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.tipset {\n  .chart-con {\n    width: 100%;\n    background: var(--main-bg-color);\n    .chart {\n      width: 100%;\n      height: 500px;\n    }\n  }\n  @media (max-width: 768px) {\n    .block-item-con {\n      .height {\n        text-align: center;\n        background: var(--link-color);\n        color: white;\n        line-height: 20px;\n        margin-bottom: 10px;\n      }\n      //display: flex;\n      // .height{\n      //   background: var(--link-color);\n      //   height: 20px;\n      //   line-height: 20px;\n      //   color: white;\n      //   padding-left: 10px;\n      //   margin-right: 10px;\n      //   position: relative;\n      //   width: 70px;\n      //   &::after{\n      //     content: '';\n      //     display: inline-block;\n      //     width: 14px;\n      //     height: 14px;\n      //     background: var(--link-color);\n      //     transform: rotate(45deg);\n      //     position: absolute;\n      //     right: -7px;\n      //     top: 3px\n      //   }\n      // }\n    }\n  }\n}\n</style>\n"]}]}