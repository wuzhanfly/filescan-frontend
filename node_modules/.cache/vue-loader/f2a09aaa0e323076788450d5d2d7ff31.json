{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/message/Detail.vue?vue&type=style&index=0&id=4b5060da&lang=scss&scoped=true&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/message/Detail.vue","mtime":1613723060779},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWVzc2FnZS1kZXRhaWwgewogICYgOjp2LWRlZXAgLmhlaWdodC1saW5rIHsKICAgIHdpZHRoOiAxMDAlOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBhIHsKICAgICAgY29sb3I6IHZhcigtLWxpbmstY29sb3IpOwogICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgIH0KICB9CiAgJiA6OnYtZGVlcCAucGFyYW1zLWNvbiB7CiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICAucGFyYW1zLXZhbHVlIHsKICAgICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgICAgd29yZC1icmVhazogYnJlYWstYWxsOwogICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgfQogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/message","sourcesContent":["<template>\n  <div class=\"message-detail bottom-10\">\n    <overview\n      :dataList=\"dataList\"\n      :dataLabel=\"$t('message.detail.overview')\"\n      :showLoading=\"loading\"\n    />\n  </div>\n</template>\n<script>\nimport { getBlockConfirmCount, getMessageDetail } from \"@/api/message\";\nexport default {\n  name: \"MessageDetail\",\n  data() {\n    return {\n      cid: \"\",\n      loading: false,\n      dataList: [\n        {\n          key: \"cid\",\n          style: {\n            fontWeight: \"bold\"\n          }\n        },\n        {\n          key: \"height\",\n          isLink: true,\n          target: \"tipset\",\n          isComponent: true\n        },\n        {\n          key: \"blockHash\",\n          isLink: true,\n          target: \"tipset\",\n          paramKey: \"hash\"\n        },\n        {\n          key: \"time\"\n        },\n        {\n          key: \"from\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"to\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"value\",\n          unit: \"\"\n        },\n        // {\n        //   key: \"fee\",\n        //   unit: \"FIL\"\n        // },\n        {\n          key: \"code\"\n        },\n        {\n          key: \"method\"\n        },\n        {\n          key: \"nonce\"\n        },\n        {\n          key: \"params\",\n          isComponent: true\n        }\n      ],\n      title: {\n        label: \"Message\",\n        detail: `# ${this.$route.query.cid}`\n      }\n    };\n  },\n  methods: {\n    async getMessageDetail() {\n            console.log(\"msg_cid:\",this.cid)\n      try {\n        this.loading = true;\n  \n        let data = await getMessageDetail({\n          msg_cid: this.cid\n        });\n        const {\n          height,\n          cid,\n          msgcreate,\n          msg,\n          block_cid,\n          method_name,\n          exit_code\n        } = data.msg;\n        const { from, to, nonce, params, value, gaslimit } = msg;\n\n        let blockRes = await getBlockConfirmCount({\n          cid: block_cid[0]\n        });\n        const paramTip = this.$t(\"message.detail.paramTip\");\n        const confirm = this.$t(\"message.detail.confirm\");\n        const sourceMap = {\n          height: this.formatNumber(height),\n          cid,\n          confirm: this.formatNumber(blockRes.count),\n          time: this.getFormatTime(msgcreate),\n          from,\n          to,\n          method: method_name,\n          nonce,\n          params: params.length > 256 ? `${params.slice(0, 256)} ...` : params,\n          value,\n          fee: this.formatNumber(gaslimit),\n          blockHash: block_cid,\n          code: exit_code\n        };\n\n        this.dataList = this.dataList.map(item => {\n          let linkList;\n          if (item.isLink) {\n            linkList = [sourceMap[item.key]];\n          } else {\n            linkList = sourceMap[item.key];\n          }\n          let res = {\n            ...item,\n            value: sourceMap[item.key],\n            linkList\n          };\n          if (item.key === \"height\") {\n            res.component = {\n              render() {\n                return (\n                  <div class=\"height-link\">\n                    <a href={`./#/tipset?height=${res.value}`}>\n                      {sourceMap.height}\n                    </a>\n                    <span>\n                      {\" \"}\n                      ({sourceMap.confirm} {confirm})\n                    </span>\n                  </div>\n                );\n              }\n            };\n          }\n          if (item.key === \"params\") {\n            res.component = {\n              render() {\n                return (\n                  <div class=\"top-10 params-con\">\n                    <el-popover\n                      placement=\"bottom-start\"\n                      width=\"200\"\n                      trigger=\"hover\"\n                      content={paramTip}\n                    >\n                      <i class=\"el-icon-warning-outline\" slot=\"reference\"></i>\n                    </el-popover>\n                    <span class=\"params-value\">{sourceMap[item.key]}</span>\n                  </div>\n                );\n              }\n            };\n          }\n          return res;\n        });\n        this.loading = false;\n      } catch (e) {\n        if (e) {\n          this.loading = false;\n        }\n      }\n    }\n  },\n  watch: {\n    cid: {\n      immediate: true,\n      handler(v) {\n        if (v) {\n          this.getMessageDetail();\n        }\n      }\n    }\n  },\n  mounted() {\n    this.cid = this.$route.query.cid;\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.message-detail {\n  & ::v-deep .height-link {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    a {\n      color: var(--link-color);\n      margin-right: 5px;\n    }\n  }\n  & ::v-deep .params-con {\n    margin-right: 10px;\n    .params-value {\n      line-height: 1.5;\n      word-break: break-all;\n      margin-left: 3px;\n    }\n  }\n}\n</style>\n"]}]}