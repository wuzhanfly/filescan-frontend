{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/stats/components/metrics/FilOutstanding.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/stats/components/metrics/FilOutstanding.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBjaGFydDsKaW1wb3J0IGRheWpzIGZyb20gImRheWpzIjsKaW1wb3J0IHsgZ2V0RmlsT3V0c3RhbmRpbmcgfSBmcm9tICJAL2FwaS90b2tlbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsT3V0c3RhbmRpbmciLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmZvOiB7CiAgICAgICAgZmxvYXRpbmc6IDAsCiAgICAgICAgcGxlZGdlOiAwLAogICAgICAgIG91dHN0YW5kaW5nOiAwCiAgICAgIH0sCiAgICAgIGZsb2F0aW5nOiBbXSwKICAgICAgcGxlZGdlOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgY2hhcnQgPSB0aGlzLiRjaGFydC5pbml0KHRoaXMuJHJlZnMuY2hhcnQpOwogICAgdGhpcy5nZXRGaWxPdXRzdGFuZGluZygpOwogIH0sCiAgbWV0aG9kczogewogICAgZHJhd0NoYXJ0KCkgewogICAgICBjb25zdCByYXRlID0gdGhpcy5yYXRlOwogICAgICBjb25zdCBudW1iZXJDb252ZXJzaW9uID0gdGhpcy5udW1iZXJDb252ZXJzaW9uOwogICAgICBjb25zdCBmbG9hdGluZ0RhdGEgPSB0aGlzLmZsb2F0aW5nOwogICAgICBjb25zdCBwbGVkZ2VEYXRhID0gdGhpcy5wbGVkZ2U7CiAgICAgIGNvbnN0IHhEYXRhID0gdGhpcy5mbG9hdGluZy5tYXAoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGRheWpzLnVuaXgoaXRlbS5uYW1lKS5mb3JtYXQoIk1NTSBEbyBISDptbSIpOwogICAgICB9KTsKICAgICAgY29uc3QgY29sb3IgPSB0aGlzLnRoZW1lID09PSAibGlnaHQiID8gImJsYWNrIiA6ICJ3aGl0ZSI7CiAgICAgIGNvbnN0IHsKICAgICAgICBzcGxpdExpbmUsCiAgICAgICAgc2VyaWVzSXRlbSwKICAgICAgICBmbG9hdEFyZWEsCiAgICAgICAgcGxlZGdlQXJlYQogICAgICB9ID0gdGhpcy5jaGFydFRoZW1lLmZpbE91dHN0YW5kaW5nOwogICAgICBjb25zdCBbZmxvYXRpbmcsIHBsZWRnZV0gPSB0aGlzLiR0KCJjaGFydC5maWxPdXRzdGFuZGluZyIpOwogICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkYXRhOiBbCiAgICAgICAgICAgIHsgbmFtZTogZmxvYXRpbmcsIGljb246ICJjaXJjbGUiIH0sCiAgICAgICAgICAgIHsgbmFtZTogcGxlZGdlLCBpY29uOiAiY2lyY2xlIiB9CiAgICAgICAgICBdLAogICAgICAgICAgc2VsZWN0ZWRNb2RlOiBmYWxzZSwKICAgICAgICAgIGxlZnQ6IDMwICogcmF0ZSwKICAgICAgICAgIHRvcDogMjAgKiByYXRlLAogICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgIGZvbnRTaXplOiAxMiAqIHJhdGUsCiAgICAgICAgICAgIGNvbG9yCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBncmlkOiB7CiAgICAgICAgICBsZWZ0OiA1MCAqIHJhdGUsCiAgICAgICAgICB0b3A6IDEwMCAqIHJhdGUsCiAgICAgICAgICByaWdodDogNDAgKiByYXRlCiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogImNhdGVnb3J5IiwKICAgICAgICAgIGRhdGE6IHhEYXRhLAogICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsCiAgICAgICAgICBheGlzVGljazogewogICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgfSwKICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTIgKiByYXRlLAogICAgICAgICAgICAgIGNvbG9yCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1hcmdpbjogMjAKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAidmFsdWUiLAogICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBheGlzVGljazogewogICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgfSwKICAgICAgICAgIHNwbGl0TGluZTogewogICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICB0eXBlOiAiZGFzaGVkIiwKICAgICAgICAgICAgICBjb2xvcjogc3BsaXRMaW5lCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgZm9ybWF0dGVyKHYpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyQ29udmVyc2lvbih2KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDEyICogcmF0ZSwKICAgICAgICAgICAgICBjb2xvcgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICB0cmlnZ2VyOiAiYXhpcyIKICAgICAgICB9LAogICAgICAgIHNlcmllczogWwogICAgICAgICAgewogICAgICAgICAgICBkYXRhOiBmbG9hdGluZ0RhdGEsCiAgICAgICAgICAgIG5hbWU6IGZsb2F0aW5nLAogICAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICAgIHNtb290aDogdHJ1ZSwKICAgICAgICAgICAgc3ltYm9sOiAibm9uZSIsCiAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiBzZXJpZXNJdGVtWzBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZWFTdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiBmbG9hdEFyZWEKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZGF0YTogcGxlZGdlRGF0YSwKICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICBuYW1lOiBwbGVkZ2UsCiAgICAgICAgICAgIHNtb290aDogdHJ1ZSwKICAgICAgICAgICAgc3ltYm9sOiAibm9uZSIsCiAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiBzZXJpZXNJdGVtWzFdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZWFTdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiBwbGVkZ2VBcmVhCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH07CiAgICAgIGNoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgfSwKICAgIGFzeW5jIGdldEZpbE91dHN0YW5kaW5nKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgbGV0IGRhdGFMaXN0ID0gYXdhaXQgZ2V0RmlsT3V0c3RhbmRpbmcoewogICAgICAgICAgdGltZV9zdGFydDogdGhpcy5ub3csCiAgICAgICAgICB0aW1lX2RpZmY6IDM2MDAsCiAgICAgICAgICByZXBlYXRlOiAyNAogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGNvbnN0IGZsb2F0aW5nTGlzdCA9IFtdOwogICAgICAgIGNvbnN0IHBsZWRnZUxpc3QgPSBbXTsKICAgICAgICBkYXRhTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgZmxvYXRpbmdMaXN0LnB1c2goewogICAgICAgICAgICBuYW1lOiBpdGVtLnRpbWVfZW5kLAogICAgICAgICAgICB2YWx1ZTogaXRlbS5mbG9hdGluZwogICAgICAgICAgfSk7CiAgICAgICAgICBwbGVkZ2VMaXN0LnB1c2goaXRlbS5wbGVnZV9jb2xsYXRlcmFsKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZsb2F0aW5nID0gT2JqZWN0LmZyZWV6ZShmbG9hdGluZ0xpc3QpOwogICAgICAgIHRoaXMucGxlZGdlID0gT2JqZWN0LmZyZWV6ZShwbGVkZ2VMaXN0KTsKICAgICAgICBjb25zdCB7IHBsZWdlX2NvbGxhdGVyYWwsIGZsb2F0aW5nLCBvdXRzdGFuZGluZyB9ID0gZGF0YUxpc3Quc2xpY2UoCiAgICAgICAgICAtMQogICAgICAgIClbMF07CiAgICAgICAgdGhpcy5pbmZvID0gewogICAgICAgICAgcGxlZGdlOiBwbGVnZV9jb2xsYXRlcmFsLAogICAgICAgICAgZmxvYXRpbmcsCiAgICAgICAgICBvdXRzdGFuZGluZwogICAgICAgIH07CiAgICAgICAgdGhpcy5kcmF3Q2hhcnQoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdGhlbWUoKSB7CiAgICAgIHRoaXMuZHJhd0NoYXJ0KCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["FilOutstanding.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FilOutstanding.vue","sourceRoot":"src/views/stats/components/metrics","sourcesContent":["<template>\n  <div\n    class=\"fil-outstanding bottom-20\"\n    v-loading=\"loading\"\n    element-loading-background=\"var(--board-bg-color)\"\n  >\n    <div class=\"chart-con\" ref=\"chart\"></div>\n    <div class=\"data-con\">\n      <div v-for=\"(item, key) in info\" :key=\"key\" class=\"info-item\">\n        <div>{{ $t(`home.filType.${key}`) }}</div>\n        <div>{{ item }}FIL</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nlet chart;\nimport dayjs from \"dayjs\";\nimport { getFilOutstanding } from \"@/api/token\";\nexport default {\n  name: \"FilOutstanding\",\n  data() {\n    return {\n      info: {\n        floating: 0,\n        pledge: 0,\n        outstanding: 0\n      },\n      floating: [],\n      pledge: [],\n      loading: false\n    };\n  },\n  mounted() {\n    chart = this.$chart.init(this.$refs.chart);\n    this.getFilOutstanding();\n  },\n  methods: {\n    drawChart() {\n      const rate = this.rate;\n      const numberConversion = this.numberConversion;\n      const floatingData = this.floating;\n      const pledgeData = this.pledge;\n      const xData = this.floating.map(item => {\n        return dayjs.unix(item.name).format(\"MMM Do HH:mm\");\n      });\n      const color = this.theme === \"light\" ? \"black\" : \"white\";\n      const {\n        splitLine,\n        seriesItem,\n        floatArea,\n        pledgeArea\n      } = this.chartTheme.filOutstanding;\n      const [floating, pledge] = this.$t(\"chart.filOutstanding\");\n      const option = {\n        legend: {\n          data: [\n            { name: floating, icon: \"circle\" },\n            { name: pledge, icon: \"circle\" }\n          ],\n          selectedMode: false,\n          left: 30 * rate,\n          top: 20 * rate,\n          textStyle: {\n            fontSize: 12 * rate,\n            color\n          }\n        },\n        grid: {\n          left: 50 * rate,\n          top: 100 * rate,\n          right: 40 * rate\n        },\n        xAxis: {\n          type: \"category\",\n          data: xData,\n          axisLine: {\n            show: false\n          },\n          boundaryGap: false,\n          axisTick: {\n            show: false\n          },\n          axisLabel: {\n            textStyle: {\n              fontSize: 12 * rate,\n              color\n            },\n            margin: 20\n          }\n        },\n        yAxis: {\n          type: \"value\",\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          splitLine: {\n            lineStyle: {\n              type: \"dashed\",\n              color: splitLine\n            }\n          },\n          axisLabel: {\n            formatter(v) {\n              return numberConversion(v);\n            },\n            textStyle: {\n              fontSize: 12 * rate,\n              color\n            }\n          }\n        },\n        tooltip: {\n          trigger: \"axis\"\n        },\n        series: [\n          {\n            data: floatingData,\n            name: floating,\n            type: \"line\",\n            smooth: true,\n            symbol: \"none\",\n            itemStyle: {\n              color: seriesItem[0]\n            },\n            areaStyle: {\n              color: floatArea\n            }\n          },\n          {\n            data: pledgeData,\n            type: \"line\",\n            name: pledge,\n            smooth: true,\n            symbol: \"none\",\n            itemStyle: {\n              color: seriesItem[1]\n            },\n            areaStyle: {\n              color: pledgeArea\n            }\n          }\n        ]\n      };\n      chart.setOption(option);\n    },\n    async getFilOutstanding() {\n      try {\n        this.loading = true;\n        let dataList = await getFilOutstanding({\n          time_start: this.now,\n          time_diff: 3600,\n          repeate: 24\n        });\n        this.loading = false;\n        const floatingList = [];\n        const pledgeList = [];\n        dataList.forEach(item => {\n          floatingList.push({\n            name: item.time_end,\n            value: item.floating\n          });\n          pledgeList.push(item.plege_collateral);\n        });\n        this.floating = Object.freeze(floatingList);\n        this.pledge = Object.freeze(pledgeList);\n        const { plege_collateral, floating, outstanding } = dataList.slice(\n          -1\n        )[0];\n        this.info = {\n          pledge: plege_collateral,\n          floating,\n          outstanding\n        };\n        this.drawChart();\n      } catch (e) {\n        this.loading = false;\n      }\n    }\n  },\n  watch: {\n    theme() {\n      this.drawChart();\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.fil-outstanding {\n  height: 400px;\n  display: flex;\n  background: var(--board-bg-color);\n  border-radius: 8px;\n  box-shadow: 0px 1px 7px 9px rgba(0, 0, 0, 0.03);\n  .chart-con {\n    height: 100%;\n    flex: 1;\n  }\n  .data-con {\n    min-width: 400px;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n    //flex: 1;\n    & > div {\n      text-align: center;\n      margin: 7px 14px;\n    }\n    .info-item {\n      flex: 1;\n      div {\n        font-size: 22px;\n        text-align: left;\n        color: var(--main-text-color);\n      }\n      div:first-child {\n        padding: 16px 0;\n        color: var(--total-board-top-color);\n      }\n      div:last-child {\n        font-size: 28px;\n        color: var(--total-board-bottom-color);\n      }\n    }\n  }\n  @media (max-width: 768px) {\n    display: block;\n    height: auto;\n    .chart-con {\n      height: 200px;\n    }\n    .data-con {\n      display: flex;\n      max-width: 100%;\n      flex-direction: row;\n      .info-item {\n        div {\n          text-align: center;\n        }\n        & div:first-child {\n          font-size: 12px !important;\n        }\n        div:last-child {\n          margin: 4vw 0 2vw;\n          font-size: 9px;\n        }\n      }\n    }\n    margin-bottom: 10px !important;\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.03);\n    border-radius: 10px;\n  }\n}\n</style>\n"]}]}