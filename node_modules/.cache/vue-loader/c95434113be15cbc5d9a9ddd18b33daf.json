{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/header/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/header/Search.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNlYXJjaCB9IGZyb20gIkAvYXBpL2hvbWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNlYXJjaCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlcjogMCwKICAgICAga2V5OiAiIiwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb1RhcmdldChuYW1lLCBrZXkpIHsKICAgICAgdGhpcy5nb1RvKG5hbWUsIHsKICAgICAgICBxdWVyeTogewogICAgICAgICAgW2tleV06IHRoaXMua2V5CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBoYW5kbGVTZWFyY2goZSkgewogICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICB0aGlzLmtleSA9IHRoaXMua2V5LnJlcGxhY2UoL1teCDAtOWEtekEtWl0vZywgIiIpOwoKICAgICAgaWYgKChlLnR5cGUgPT09ICJrZXl1cCIgJiYgZS5rZXlDb2RlICE9PSAxMykgfHwgIXRoaXMua2V5KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICBsZXQgcmVzID0gYXdhaXQgc2VhcmNoKHsKICAgICAgICAgIGtleTogdGhpcy5rZXksCiAgICAgICAgICBmaWx0ZXI6IHRoaXMuZmlsdGVyCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc3QgeyBtb2RlbF9mbGFnIH0gPSByZXM7CiAgICAgICAgbGV0IHRhcmdldCA9ICIiOwogICAgICAgIGxldCBrZXkgPSAiIjsKICAgICAgICBzd2l0Y2ggKG1vZGVsX2ZsYWcpIHsKICAgICAgICAgIGNhc2UgImJsb2NrX2hhc2giOgogICAgICAgICAgICB0YXJnZXQgPSAidGlwc2V0IjsKICAgICAgICAgICAga2V5ID0gImhhc2giOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIkhlaWdodCI6CiAgICAgICAgICAgIHRhcmdldCA9ICJ0aXBzZXQiOwogICAgICAgICAgICBrZXkgPSAiaGVpZ2h0IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtZXNzYWdlX0lEIjoKICAgICAgICAgICAgdGFyZ2V0ID0gIm1lc3NhZ2VEZXRhaWwiOwogICAgICAgICAgICBrZXkgPSAiY2lkIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJhY3RvciI6CiAgICAgICAgICAgIHRhcmdldCA9ICJhZGRyZXNzRGV0YWlsIjsKICAgICAgICAgICAga2V5ID0gImFkZHJlc3MiOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInBlZXJfaWQiOgogICAgICAgICAgICB0YXJnZXQgPSAicGVlciI7CiAgICAgICAgICAgIGtleSA9ICJwZWVyX2lkIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0YXJnZXQgPSAibm9SZXN1bHQiOwogICAgICAgICAgICBrZXkgPSAia2V5IjsKICAgICAgICB9CiAgICAgICAgdGhpcy4kZW1pdCgiaGlkZSIpOwogICAgICAgIHRoaXMuZ29UYXJnZXQodGFyZ2V0LCBrZXkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAiJHJvdXRlLnBhdGgiKCkgewogICAgICB0aGlzLmtleSA9ICIiOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views/header","sourcesContent":["<template>\n  <div class=\"header-search\">\n    <el-input\n      :placeholder=\"$t('header.placeholder')\"\n      v-model=\"key\"\n      :class=\"['input-with-select', theme === 'light' ? 'light' : 'dark']\"\n      @keyup.native=\"handleSearch\"\n      :clearable=\"!isMobile\"\n      :suffix-icon=\"loading && !isMobile ? 'el-icon-loading' : ''\"\n    >\n      <el-select\n        v-model=\"filter\"\n        slot=\"prepend\"\n        popper-class=\"filter-select\"\n        v-if=\"!isMobile\"\n        class=\"search-filter\"\n      >\n        <el-option\n          v-for=\"item in $t('header.filter')\"\n          :key=\"item.label\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        ></el-option>\n      </el-select>\n      <el-button\n        slot=\"append\"\n        icon=\"el-icon-search\"\n        @click.native=\"handleSearch\"\n        v-if=\"!isMobile\"\n      ></el-button>\n    </el-input>\n    <div class=\"mb-button\" v-if=\"isMobile\">\n      <el-button type=\"primary\" @click.native=\"handleSearch\">\n        {{ $t(\"header.mb.search\") }}\n      </el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport { search } from \"@/api/home\";\nexport default {\n  name: \"Search\",\n  data() {\n    return {\n      filter: 0,\n      key: \"\",\n      loading: false\n    };\n  },\n  methods: {\n    goTarget(name, key) {\n      this.goTo(name, {\n        query: {\n          [key]: this.key\n        }\n      });\n    },\n    async handleSearch(e) {\n      /* eslint-disable */\n      this.key = this.key.replace(/[^\b0-9a-zA-Z]/g, \"\");\n\n      if ((e.type === \"keyup\" && e.keyCode !== 13) || !this.key) {\n        return;\n      }\n      try {\n        this.loading = true;\n        let res = await search({\n          key: this.key,\n          filter: this.filter\n        });\n        this.loading = false;\n        const { model_flag } = res;\n        let target = \"\";\n        let key = \"\";\n        switch (model_flag) {\n          case \"block_hash\":\n            target = \"tipset\";\n            key = \"hash\";\n            break;\n          case \"Height\":\n            target = \"tipset\";\n            key = \"height\";\n            break;\n          case \"message_ID\":\n            target = \"messageDetail\";\n            key = \"cid\";\n            break;\n          case \"actor\":\n            target = \"addressDetail\";\n            key = \"address\";\n            break;\n          case \"peer_id\":\n            target = \"peer\";\n            key = \"peer_id\";\n            break;\n          default:\n            target = \"noResult\";\n            key = \"key\";\n        }\n        this.$emit(\"hide\");\n        this.goTarget(target, key);\n      } catch (e) {\n        this.loading = false;\n      }\n    }\n  },\n  watch: {\n    \"$route.path\"() {\n      this.key = \"\";\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.header-search {\n  flex: 1;\n  .input-with-select {\n    & ::v-deep  input:nth-child(2) {\n      background: var(--board-bg-color) !important;\n      color: var(--main-text-color);\n    }\n    &.dark ::v-deep input:nth-child(2) {\n      background: var(--main-bg-color) !important;\n      border-color: transparent;\n    }\n    &.dark ::v-deep .el-input-group__prepend{\n      background: var(--main-bg-color)!important;\n      border-color: transparent;\n      border-right: 1px solid var(--board-bg-color)\n    }\n    &.dark ::v-deep .el-input-group__append {\n      background: var(--main-bg-color)!important;\n      border-color: transparent;\n      border-left: 1px solid var(--board-bg-color)\n    }\n  }\n  & ::v-deep .el-input-group__prepend {\n    background: var(--board-bg-color) !important;\n    .el-select.search-filter input {\n      width: 130px;\n      background: transparent !important;\n    }\n  }\n  & ::v-deep .el-input-group__append {\n    background: var(--board-bg-color) !important;\n    color: var(--main-text-color) !important;\n  }\n  & ::v-deep .el-button {\n    width: 70px;\n  }\n  @media (max-width: 768px) {\n    & ::v-deep input {\n      height: 30px !important;\n      border-radius: 15px !important;\n    }\n    & ::v-deep .el-select {\n      width: 100px;\n    }\n    & ::v-deep .el-input__suffix {\n      i {\n        line-height: 20px;\n        padding-left: 5px;\n        &.is-reverse {\n          padding-right: 10px;\n        }\n      }\n    }\n    & ::v-deep button {\n      width: 50px !important;\n    }\n    .mb-button .el-button {\n      height: 30px;\n      border-radius: 15px;\n      width: 100% !important;\n      margin-top: 20px;\n    }\n  }\n}\n</style>"]}]}