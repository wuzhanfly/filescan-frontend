{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/home/components/chart/TotalPowerChart.vue?vue&type=style&index=0&id=703119b9&lang=scss&scoped=true&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/home/components/chart/TotalPowerChart.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50b3RhbC1wb3dlci1jaGFydCB7CiAgZGlzcGxheTogZmxleDsKCiAgLmluZm8tY29uIHsKICAgIC8vZmxleDogMjsKICAgIG1pbi13aWR0aDogMTgwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICYgPiBkaXYgewogICAgICBkaXY6bGFzdC1jaGlsZCB7CiAgICAgICAgZm9udC1zaXplOiAyNnB4OwogICAgICAgIGNvbG9yOiB2YXIoLS10b3RhbC1wb3dlci1jb2xvcik7CiAgICAgIH0KICAgICAgZGl2OmZpcnN0LWNoaWxkIHsKICAgICAgICBjb2xvcjogdmFyKC0tdG90YWwtYm9hcmQtdG9wLWNvbG9yKTsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgfQogICAgfQogIH0KICAuY2hhcnQtY29uIHsKICAgIGZsZXg6IDE7CiAgICBoZWlnaHQ6IDEwMCU7CiAgfQogIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkgewogICAgLmluZm8tY29uIC5wb3dlci1pbmZvLAogICAgLmluZm8tY29uIC5zdG9yYWdlLWluZm8gewogICAgICAmID4gZGl2Omxhc3QtY2hpbGQgewogICAgICAgIG1hcmdpbi10b3A6IDVweCAhaW1wb3J0YW50OwogICAgICAgIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OwogICAgICB9CiAgICB9CiAgICBib3gtc2hhZG93OiAwcHggMnB4IDRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjAzKTsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIC5pbmZvLWNvbiB7CiAgICAgIGZsZXg6IDI7CiAgICB9CiAgICAuY2hhcnQtY29uIHsKICAgICAgZmxleDogMzsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["TotalPowerChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TotalPowerChart.vue","sourceRoot":"src/views/home/components/chart","sourcesContent":["<template>\n  <div\n    class=\"total-power-chart\"\n    v-loading=\"loading\"\n    element-loading-background=\"var(--board-bg-color)\"\n  >\n    <div class=\"info-con\">\n      <div class=\"power-info\">\n        <div>\n          {{ $t(\"home.totalPower.power\") }}\n        </div>\n        <div class=\"top-10 bottom-10\" v-show=\"!loading\">{{ totalPower }}</div>\n      </div>\n      <div class=\"storage-info\">\n        <div>\n          {{ $t(\"home.totalPower.capacity\") }}\n        </div>\n        <div class=\"top-10\" v-show=\"!loading\">{{ totalPower }}</div>\n      </div>\n    </div>\n    <div class=\"chart-con\" ref=\"power\"></div>\n  </div>\n</template>\n<script>\nimport { getTotalPowerData } from \"@/api/home\";\nlet chart;\nexport default {\n  name: \"TotalPowerChart\",\n  data() {\n    return {\n      dataList: [],\n      totalPower: 0,\n      loading: false,\n      storageCapacity: 0\n    };\n  },\n  props: {\n    time: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  methods: {\n    drawPowerChart() {\n      const series = this.dataList;\n      const { axisLine, seriesItem, area } = this.chartTheme.totalPower;\n      const xData = series.map(item => {\n        return {\n          value: item.name\n        };\n      });\n      const vm = this;\n      const option = {\n        xAxis: {\n          boundaryGap: false,\n          axisLine: {\n            lineStyle: {\n              color: axisLine\n            }\n          },\n          axisLabel: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          data: xData\n        },\n        yAxis: {\n          type: \"value\",\n          show: false\n        },\n        grid: {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 10\n        },\n        tooltip: {\n          trigger: \"axis\",\n\n          formatter: function(p) {\n            const html = vm.$t(\"chart.totalPower\", {\n              value: vm.unitConversion(p[0].data.value, 3),\n              name: p[0].data.name\n            });\n            return html;\n          }\n        },\n        series: [\n          {\n            data: series,\n            type: \"line\",\n            symbol: \"none\",\n            smooth: true,\n            lineStyle: {\n              color: seriesItem\n            },\n            areaStyle: {\n              color: area\n            }\n          }\n        ]\n      };\n      chart.setOption(option);\n    },\n    async getTotalPowerData() {\n      try {\n        this.loading = true;\n        const res = await getTotalPowerData({\n          time: this.time.end_time\n        });\n        this.loading = false;\n        const dataList = res.data.map(item => {\n          return {\n            name: this.formatTimeByStr(item.time * 1000, \"MMM Do YYYY HH:mm\"),\n            value: item.power\n          };\n        });\n        this.storageCapacity = this.unitConversion(res.storage_capacity, 3);\n        this.totalPower = this.unitConversion(dataList.slice(-1)[0].value, 3);\n        this.dataList = Object.freeze(dataList);\n        this.drawPowerChart();\n      } catch (e) {\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    chart = this.$chart.init(this.$refs.power);\n    this.getTotalPowerData();\n  },\n  watch: {\n    latestBlockHeight() {\n      if (this.loadCount === 1) {\n        return;\n      }\n      this.getTotalPowerData();\n    },\n    theme() {\n      this.drawPowerChart();\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.total-power-chart {\n  display: flex;\n\n  .info-con {\n    //flex: 2;\n    min-width: 180px;\n    display: flex;\n    flex-direction: column;\n    & > div {\n      div:last-child {\n        font-size: 26px;\n        color: var(--total-power-color);\n      }\n      div:first-child {\n        color: var(--total-board-top-color);\n        font-weight: bold;\n      }\n    }\n  }\n  .chart-con {\n    flex: 1;\n    height: 100%;\n  }\n  @media (max-width: 768px) {\n    .info-con .power-info,\n    .info-con .storage-info {\n      & > div:last-child {\n        margin-top: 5px !important;\n        font-size: 12px !important;\n      }\n    }\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.03);\n    border-radius: 4px;\n    .info-con {\n      flex: 2;\n    }\n    .chart-con {\n      flex: 3;\n    }\n  }\n}\n</style>\n"]}]}