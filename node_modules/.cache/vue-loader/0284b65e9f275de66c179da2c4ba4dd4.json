{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/home/components/chart/BlockTimeChart.vue?vue&type=style&index=0&id=5c81ac90&lang=scss&scoped=true&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/home/components/chart/BlockTimeChart.vue","mtime":1612684657988},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYmxvY2stdGltZS1jaGFydCB7CiAgLmNoYXJ0LXRvcCB7CiAgICBkaXNwbGF5OiBmbGV4OwogIH0KICAuYXZnIHsKICAgIG1pbi13aWR0aDogMTgwcHg7CiAgICBkaXY6Zmlyc3QtY2hpbGQgewogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgaGVpZ2h0OiAzMHB4OwogICAgICBjb2xvcjogdmFyKC0tdG90YWwtYm9hcmQtdG9wLWNvbG9yKTsKICAgICAgJjo6YmVmb3JlIHsKICAgICAgICBjb250ZW50OiAiIjsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgd2lkdGg6IDEycHg7CiAgICAgICAgaGVpZ2h0OiAxMnB4OwogICAgICAgIGJhY2tncm91bmQ6ICMwMDkxZmY7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgIG1hcmdpbi1yaWdodDogNXB4OwogICAgICB9CiAgICB9CiAgICBkaXY6bGFzdC1jaGlsZCB7CiAgICAgIGNvbG9yOiAjMDA5MWZmOwogICAgICBmb250LXNpemU6IDI2cHg7CiAgICAgIG1hcmdpbi10b3A6IDVweDsKICAgIH0KICB9CiAgLmNoYXJ0LWNvbiB7CiAgICBoZWlnaHQ6IDEwMHB4OwogICAgZmxleDogMTsKICB9CiAgLm1pbi1tYXggewogICAgbWFyZ2luLWxlZnQ6IDE4MHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGZsZXg6IDE7CiAgICAubWluLAogICAgLm1heCB7CiAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgc3BhbjpmaXJzdC1jaGlsZCB7CiAgICAgICAgY29sb3I6IHZhcigtLXRvdGFsLWJvYXJkLWJvdHRvbS1jb2xvcik7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgICB9CiAgICAgIHNwYW46bGFzdC1jaGlsZCB7CiAgICAgICAgY29sb3I6IHZhcigtLW1haW4tdGV4dC1jb2xvcik7CiAgICAgIH0KICAgIH0KICAgIC5tYXggewogICAgICBzcGFuOmZpcnN0LWNoaWxkIHsKICAgICAgICBjb2xvcjogI2ZmMDA0NDsKICAgICAgfQogICAgfQogIH0KICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgIGJveC1zaGFkb3c6IDBweCAycHggNHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMDMpOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgLmF2ZyB7CiAgICAgIGZsZXg6IDI7CiAgICAgIGRpdjpsYXN0LWNoaWxkIHsKICAgICAgICBtYXJnaW4tdG9wOiAxNXB4ICFpbXBvcnRhbnQ7CiAgICAgICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7CiAgICAgIH0KICAgICAgJiBkaXY6Zmlyc3QtY2hpbGQ6OmJlZm9yZSB7CiAgICAgICAgd2lkdGg6IDZweDsKICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgfQogICAgfQogICAgLmNoYXJ0LWNvbiB7CiAgICAgIGZsZXg6IDM7CiAgICB9CiAgICAubWluLW1heCB7CiAgICAgIHBhZGRpbmctbGVmdDogNDAlOwogICAgICBtYXJnaW46IDA7CiAgICB9CiAgICAubWluLAogICAgLm1heCB7CiAgICAgIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OwogICAgfQogIH0KfQo="},{"version":3,"sources":["BlockTimeChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlockTimeChart.vue","sourceRoot":"src/views/home/components/chart","sourcesContent":["<template>\n  <div\n    class=\"block-time-chart\"\n    v-loading=\"loading\"\n    element-loading-background=\"var(--board-bg-color)\"\n  >\n    <div class=\"chart-top\">\n      <div class=\"avg top-30\">\n        <div>\n          {{ $t(\"home.blockTime.label\") }}\n          <el-popover\n            placement=\"bottom-start\"\n            width=\"200\"\n            trigger=\"hover\"\n            :content=\"$t('home.blockTime.tips')\"\n          >\n            <i class=\"el-icon-warning-outline\" slot=\"reference\"></i>\n          </el-popover>\n        </div>\n        <div v-show=\"!loading\">{{ avgTime }} s</div>\n      </div>\n      <div class=\"chart-con\" ref=\"time\"></div>\n    </div>\n    <div class=\"min-max bottom-10\">\n      <div class=\"min\">\n        <span>{{ $t(\"home.blockTime.min\") }}</span>\n        <span>{{ min }} s</span>\n      </div>\n      <div class=\"max\">\n        <span>{{ $t(\"home.blockTime.max\") }}</span>\n        <span>{{ max }} s</span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { getBlockTimeData } from \"@/api/home\";\nimport dayjs from \"dayjs\";\nlet chart;\nexport default {\n  name: \"BlockTimeChart\",\n  data() {\n    return {\n      dataList: [],\n      avgTime: 0,\n      min: 0,\n      max: 0,\n      loading: false,\n      shouldRespondThemeChange: true\n    };\n  },\n  methods: {\n    drawTimeChart() {\n      const data = this.dataList;\n      const {\n        axisLine,\n        seriesItem,\n        seriesMarkLine\n      } = this.chartTheme.blockTime;\n      const vm = this;\n      const option = {\n        tooltip: {\n          formatter: function(p) {\n            const html = vm.$t(\"chart.blockTime\", {\n              value: p.value,\n              name: p.name\n            });\n            return html;\n          }\n        },\n        grid: {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 10\n        },\n        xAxis: {\n          data: [],\n          axisTick: {\n            show: false\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              color: axisLine\n            }\n          }\n        },\n        yAxis: {\n          show: false\n        },\n        series: [\n          {\n            type: \"bar\",\n            itemStyle: {\n              normal: {\n                color: seriesItem\n              }\n            },\n            data: data,\n            markLine: {\n              silent: true,\n              label: {\n                show: false\n              },\n              lineStyle: {\n                color: seriesMarkLine\n              },\n              symbol: \"none\",\n              data: [\n                {\n                  type: \"average\"\n                }\n              ]\n            }\n          }\n        ]\n      };\n      chart.setOption(option);\n    },\n    async getBlockTimeData() {\n      try {\n        this.loading = true;\n        const res = await getBlockTimeData(this.time);\n        this.loading = false;\n        const { data, min, max, avg_blocktime } = res;\n        const dataList = data.map(item => {\n          const end = dayjs(item.time * 1000)\n            .add(1, \"hour\")\n            .format(\"HH:mm\");\n          return {\n            name: `${this.formatTimeByStr(\n              item.time * 1000,\n              \"MMM Do YYYY HH:mm\"\n            )}-${end}`,\n            value: item.block_time\n          };\n        });\n        this.dataList = Object.freeze(dataList);\n        this.avgTime = Math.floor(avg_blocktime);\n        this.min = min;\n        this.max = max;\n        this.drawTimeChart();\n      } catch (e) {\n        this.loading = false;\n      }\n    }\n  },\n  props: {\n    time: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  mounted() {\n    chart = this.$chart.init(this.$refs.time);\n    this.getBlockTimeData();\n  },\n  watch: {\n    latestBlockHeight() {\n      {\n        if (this.loadCount === 1) {\n          return;\n        }\n        this.getBlockTimeData();\n      }\n    },\n    theme() {\n      this.drawTimeChart();\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.block-time-chart {\n  .chart-top {\n    display: flex;\n  }\n  .avg {\n    min-width: 180px;\n    div:first-child {\n      font-weight: bold;\n      height: 30px;\n      color: var(--total-board-top-color);\n      &::before {\n        content: \"\";\n        display: inline-block;\n        width: 12px;\n        height: 12px;\n        background: #0091ff;\n        border-radius: 50%;\n        margin-right: 5px;\n      }\n    }\n    div:last-child {\n      color: #0091ff;\n      font-size: 26px;\n      margin-top: 5px;\n    }\n  }\n  .chart-con {\n    height: 100px;\n    flex: 1;\n  }\n  .min-max {\n    margin-left: 180px;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n    .min,\n    .max {\n      font-size: 16px;\n      span:first-child {\n        color: var(--total-board-bottom-color);\n        margin-right: 10px;\n      }\n      span:last-child {\n        color: var(--main-text-color);\n      }\n    }\n    .max {\n      span:first-child {\n        color: #ff0044;\n      }\n    }\n  }\n  @media (max-width: 768px) {\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.03);\n    border-radius: 4px;\n    .avg {\n      flex: 2;\n      div:last-child {\n        margin-top: 15px !important;\n        font-size: 12px !important;\n      }\n      & div:first-child::before {\n        width: 6px;\n        height: 6px;\n      }\n    }\n    .chart-con {\n      flex: 3;\n    }\n    .min-max {\n      padding-left: 40%;\n      margin: 0;\n    }\n    .min,\n    .max {\n      font-size: 12px !important;\n    }\n  }\n}\n</style>\n"]}]}