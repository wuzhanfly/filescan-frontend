{"remainingRequest":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wuzhanfly/git/filscan-frontend/src/views/message/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wuzhanfly/git/filscan-frontend/src/views/message/Detail.vue","mtime":1613723060779},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wuzhanfly/git/filscan-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEJsb2NrQ29uZmlybUNvdW50LCBnZXRNZXNzYWdlRGV0YWlsIH0gZnJvbSAiQC9hcGkvbWVzc2FnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWVzc2FnZURldGFpbCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNpZDogIiIsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhTGlzdDogWwogICAgICAgIHsKICAgICAgICAgIGtleTogImNpZCIsCiAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICBmb250V2VpZ2h0OiAiYm9sZCIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImhlaWdodCIsCiAgICAgICAgICBpc0xpbms6IHRydWUsCiAgICAgICAgICB0YXJnZXQ6ICJ0aXBzZXQiLAogICAgICAgICAgaXNDb21wb25lbnQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImJsb2NrSGFzaCIsCiAgICAgICAgICBpc0xpbms6IHRydWUsCiAgICAgICAgICB0YXJnZXQ6ICJ0aXBzZXQiLAogICAgICAgICAgcGFyYW1LZXk6ICJoYXNoIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAidGltZSIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImZyb20iLAogICAgICAgICAgaXNMaW5rOiB0cnVlLAogICAgICAgICAgdGFyZ2V0OiAiYWRkcmVzcy9kZXRhaWwiLAogICAgICAgICAgcGFyYW1LZXk6ICJhZGRyZXNzIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAidG8iLAogICAgICAgICAgaXNMaW5rOiB0cnVlLAogICAgICAgICAgdGFyZ2V0OiAiYWRkcmVzcy9kZXRhaWwiLAogICAgICAgICAgcGFyYW1LZXk6ICJhZGRyZXNzIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAidmFsdWUiLAogICAgICAgICAgdW5pdDogIiIKICAgICAgICB9LAogICAgICAgIC8vIHsKICAgICAgICAvLyAgIGtleTogImZlZSIsCiAgICAgICAgLy8gICB1bml0OiAiRklMIgogICAgICAgIC8vIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiY29kZSIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogIm1ldGhvZCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogIm5vbmNlIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAicGFyYW1zIiwKICAgICAgICAgIGlzQ29tcG9uZW50OiB0cnVlCiAgICAgICAgfQogICAgICBdLAogICAgICB0aXRsZTogewogICAgICAgIGxhYmVsOiAiTWVzc2FnZSIsCiAgICAgICAgZGV0YWlsOiBgIyAke3RoaXMuJHJvdXRlLnF1ZXJ5LmNpZH1gCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRNZXNzYWdlRGV0YWlsKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygibXNnX2NpZDoiLHRoaXMuY2lkKQogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgCiAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCBnZXRNZXNzYWdlRGV0YWlsKHsKICAgICAgICAgIG1zZ19jaWQ6IHRoaXMuY2lkCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgewogICAgICAgICAgaGVpZ2h0LAogICAgICAgICAgY2lkLAogICAgICAgICAgbXNnY3JlYXRlLAogICAgICAgICAgbXNnLAogICAgICAgICAgYmxvY2tfY2lkLAogICAgICAgICAgbWV0aG9kX25hbWUsCiAgICAgICAgICBleGl0X2NvZGUKICAgICAgICB9ID0gZGF0YS5tc2c7CiAgICAgICAgY29uc3QgeyBmcm9tLCB0bywgbm9uY2UsIHBhcmFtcywgdmFsdWUsIGdhc2xpbWl0IH0gPSBtc2c7CgogICAgICAgIGxldCBibG9ja1JlcyA9IGF3YWl0IGdldEJsb2NrQ29uZmlybUNvdW50KHsKICAgICAgICAgIGNpZDogYmxvY2tfY2lkWzBdCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgcGFyYW1UaXAgPSB0aGlzLiR0KCJtZXNzYWdlLmRldGFpbC5wYXJhbVRpcCIpOwogICAgICAgIGNvbnN0IGNvbmZpcm0gPSB0aGlzLiR0KCJtZXNzYWdlLmRldGFpbC5jb25maXJtIik7CiAgICAgICAgY29uc3Qgc291cmNlTWFwID0gewogICAgICAgICAgaGVpZ2h0OiB0aGlzLmZvcm1hdE51bWJlcihoZWlnaHQpLAogICAgICAgICAgY2lkLAogICAgICAgICAgY29uZmlybTogdGhpcy5mb3JtYXROdW1iZXIoYmxvY2tSZXMuY291bnQpLAogICAgICAgICAgdGltZTogdGhpcy5nZXRGb3JtYXRUaW1lKG1zZ2NyZWF0ZSksCiAgICAgICAgICBmcm9tLAogICAgICAgICAgdG8sCiAgICAgICAgICBtZXRob2Q6IG1ldGhvZF9uYW1lLAogICAgICAgICAgbm9uY2UsCiAgICAgICAgICBwYXJhbXM6IHBhcmFtcy5sZW5ndGggPiAyNTYgPyBgJHtwYXJhbXMuc2xpY2UoMCwgMjU2KX0gLi4uYCA6IHBhcmFtcywKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgZmVlOiB0aGlzLmZvcm1hdE51bWJlcihnYXNsaW1pdCksCiAgICAgICAgICBibG9ja0hhc2g6IGJsb2NrX2NpZCwKICAgICAgICAgIGNvZGU6IGV4aXRfY29kZQogICAgICAgIH07CgogICAgICAgIHRoaXMuZGF0YUxpc3QgPSB0aGlzLmRhdGFMaXN0Lm1hcChpdGVtID0+IHsKICAgICAgICAgIGxldCBsaW5rTGlzdDsKICAgICAgICAgIGlmIChpdGVtLmlzTGluaykgewogICAgICAgICAgICBsaW5rTGlzdCA9IFtzb3VyY2VNYXBbaXRlbS5rZXldXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpbmtMaXN0ID0gc291cmNlTWFwW2l0ZW0ua2V5XTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIHZhbHVlOiBzb3VyY2VNYXBbaXRlbS5rZXldLAogICAgICAgICAgICBsaW5rTGlzdAogICAgICAgICAgfTsKICAgICAgICAgIGlmIChpdGVtLmtleSA9PT0gImhlaWdodCIpIHsKICAgICAgICAgICAgcmVzLmNvbXBvbmVudCA9IHsKICAgICAgICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWlnaHQtbGluayI+CiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17YC4vIy90aXBzZXQ/aGVpZ2h0PSR7cmVzLnZhbHVlfWB9PgogICAgICAgICAgICAgICAgICAgICAge3NvdXJjZU1hcC5oZWlnaHR9CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgICAgeyIgIn0KICAgICAgICAgICAgICAgICAgICAgICh7c291cmNlTWFwLmNvbmZpcm19IHtjb25maXJtfSkKICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXRlbS5rZXkgPT09ICJwYXJhbXMiKSB7CiAgICAgICAgICAgIHJlcy5jb21wb25lbnQgPSB7CiAgICAgICAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9wLTEwIHBhcmFtcy1jb24iPgogICAgICAgICAgICAgICAgICAgIDxlbC1wb3BvdmVyCiAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9ImJvdHRvbS1zdGFydCIKICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSIyMDAiCiAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyPSJob3ZlciIKICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3BhcmFtVGlwfQogICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJlbC1pY29uLXdhcm5pbmctb3V0bGluZSIgc2xvdD0icmVmZXJlbmNlIj48L2k+CiAgICAgICAgICAgICAgICAgICAgPC9lbC1wb3BvdmVyPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwYXJhbXMtdmFsdWUiPntzb3VyY2VNYXBbaXRlbS5rZXldfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY2lkOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcih2KSB7CiAgICAgICAgaWYgKHYpIHsKICAgICAgICAgIHRoaXMuZ2V0TWVzc2FnZURldGFpbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2lkID0gdGhpcy4kcm91dGUucXVlcnkuY2lkOwogIH0KfTsK"},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/message","sourcesContent":["<template>\n  <div class=\"message-detail bottom-10\">\n    <overview\n      :dataList=\"dataList\"\n      :dataLabel=\"$t('message.detail.overview')\"\n      :showLoading=\"loading\"\n    />\n  </div>\n</template>\n<script>\nimport { getBlockConfirmCount, getMessageDetail } from \"@/api/message\";\nexport default {\n  name: \"MessageDetail\",\n  data() {\n    return {\n      cid: \"\",\n      loading: false,\n      dataList: [\n        {\n          key: \"cid\",\n          style: {\n            fontWeight: \"bold\"\n          }\n        },\n        {\n          key: \"height\",\n          isLink: true,\n          target: \"tipset\",\n          isComponent: true\n        },\n        {\n          key: \"blockHash\",\n          isLink: true,\n          target: \"tipset\",\n          paramKey: \"hash\"\n        },\n        {\n          key: \"time\"\n        },\n        {\n          key: \"from\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"to\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"value\",\n          unit: \"\"\n        },\n        // {\n        //   key: \"fee\",\n        //   unit: \"FIL\"\n        // },\n        {\n          key: \"code\"\n        },\n        {\n          key: \"method\"\n        },\n        {\n          key: \"nonce\"\n        },\n        {\n          key: \"params\",\n          isComponent: true\n        }\n      ],\n      title: {\n        label: \"Message\",\n        detail: `# ${this.$route.query.cid}`\n      }\n    };\n  },\n  methods: {\n    async getMessageDetail() {\n            console.log(\"msg_cid:\",this.cid)\n      try {\n        this.loading = true;\n  \n        let data = await getMessageDetail({\n          msg_cid: this.cid\n        });\n        const {\n          height,\n          cid,\n          msgcreate,\n          msg,\n          block_cid,\n          method_name,\n          exit_code\n        } = data.msg;\n        const { from, to, nonce, params, value, gaslimit } = msg;\n\n        let blockRes = await getBlockConfirmCount({\n          cid: block_cid[0]\n        });\n        const paramTip = this.$t(\"message.detail.paramTip\");\n        const confirm = this.$t(\"message.detail.confirm\");\n        const sourceMap = {\n          height: this.formatNumber(height),\n          cid,\n          confirm: this.formatNumber(blockRes.count),\n          time: this.getFormatTime(msgcreate),\n          from,\n          to,\n          method: method_name,\n          nonce,\n          params: params.length > 256 ? `${params.slice(0, 256)} ...` : params,\n          value,\n          fee: this.formatNumber(gaslimit),\n          blockHash: block_cid,\n          code: exit_code\n        };\n\n        this.dataList = this.dataList.map(item => {\n          let linkList;\n          if (item.isLink) {\n            linkList = [sourceMap[item.key]];\n          } else {\n            linkList = sourceMap[item.key];\n          }\n          let res = {\n            ...item,\n            value: sourceMap[item.key],\n            linkList\n          };\n          if (item.key === \"height\") {\n            res.component = {\n              render() {\n                return (\n                  <div class=\"height-link\">\n                    <a href={`./#/tipset?height=${res.value}`}>\n                      {sourceMap.height}\n                    </a>\n                    <span>\n                      {\" \"}\n                      ({sourceMap.confirm} {confirm})\n                    </span>\n                  </div>\n                );\n              }\n            };\n          }\n          if (item.key === \"params\") {\n            res.component = {\n              render() {\n                return (\n                  <div class=\"top-10 params-con\">\n                    <el-popover\n                      placement=\"bottom-start\"\n                      width=\"200\"\n                      trigger=\"hover\"\n                      content={paramTip}\n                    >\n                      <i class=\"el-icon-warning-outline\" slot=\"reference\"></i>\n                    </el-popover>\n                    <span class=\"params-value\">{sourceMap[item.key]}</span>\n                  </div>\n                );\n              }\n            };\n          }\n          return res;\n        });\n        this.loading = false;\n      } catch (e) {\n        if (e) {\n          this.loading = false;\n        }\n      }\n    }\n  },\n  watch: {\n    cid: {\n      immediate: true,\n      handler(v) {\n        if (v) {\n          this.getMessageDetail();\n        }\n      }\n    }\n  },\n  mounted() {\n    this.cid = this.$route.query.cid;\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.message-detail {\n  & ::v-deep .height-link {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    a {\n      color: var(--link-color);\n      margin-right: 5px;\n    }\n  }\n  & ::v-deep .params-con {\n    margin-right: 10px;\n    .params-value {\n      line-height: 1.5;\n      word-break: break-all;\n      margin-left: 3px;\n    }\n  }\n}\n</style>\n"]}]}